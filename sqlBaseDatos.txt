use Inventario_Hogar;
CREATE TABLE if NOT EXISTS usuarios (
    id              INT AUTO_INCREMENT PRIMARY KEY,
    nombre_user     VARCHAR(50)  NOT NULL UNIQUE,
    email           VARCHAR(100) NOT NULL UNIQUE,
    nombre          VARCHAR(50)  NOT NULL,
    apellido        VARCHAR(50)  NOT NULL,
    contrasena      VARCHAR(255)  NOT NULL
);
CREATE TABLE  if NOT EXISTS  categoria (
    id      INT AUTO_INCREMENT PRIMARY KEY,
    nombre  VARCHAR(50) NOT NULL UNIQUE
);

CREATE TABLE  if NOT EXISTS  producto (
    id                  INT AUTO_INCREMENT PRIMARY KEY,
    id_user             INT NOT NULL,
    nombre              VARCHAR(100) NOT NULL,
    id_categoria        INT NOT NULL,
    cantidad            INT NOT NULL,
    fecha_caducidad DATE NULL,
     cantidad_min_deseada INT NOT NULL DEFAULT 0,
    lista_compra        BOOLEAN NOT NULL DEFAULT TRUE,
    CONSTRAINT fk_producto_usuario
        FOREIGN KEY (id_user) REFERENCES usuarios(id),
    CONSTRAINT fk_producto_categoria
        FOREIGN KEY (id_categoria) REFERENCES categoria(id)
);

CREATE TABLE  if NOT EXISTS  registro_inicio (
    id          INT AUTO_INCREMENT PRIMARY KEY,
    inicio_sesion DATETIME NOT NULL,
    id_user     INT NOT NULL,
    CONSTRAINT fk_inicio_usuario
        FOREIGN KEY (id_user) REFERENCES usuarios(id)
        ON DELETE CASCADE
);
CREATE TABLE   if NOT EXISTS  registro_recuperacion (
    id          INT AUTO_INCREMENT PRIMARY KEY,
    fecha       DATETIME NOT NULL,
    id_user     INT NOT NULL,
    CONSTRAINT fk_recuperacion_usuario
        FOREIGN KEY (id_user) REFERENCES usuarios(id)
        ON DELETE CASCADE
);
